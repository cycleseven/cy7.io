---
title: "Overusing anonymous functions"
slug: "anonymous-functions"
date: "2020-01-01"
---

import { CodeBlock } from "@cy7/blog";

Anonymous functions are a common feature of JS that can make callback-heavy code more concise.

```js
// With named functions
array
  .filter(function notNull(x) {
    return x !== null;
  })
  .map(function double(x) {
    return x * 2;
  });

// The same code with anonymous functions
array.filter(x => x !== null).map(x => x * 2);
```

The ES6 arrow syntax is commonly used for anonymous functions. But arrow functions can have names too. Just assign the function to a variable.

```js
// A named arrow function
let double = x => x * 2;
console.log(double.name); // "double"
```

Anonymous functions have a downside: they make stack traces less readable. For example, here's what happens when a named callback throws an exception.

<CodeBlock
  code={`
    const doSomething = () => {
      throw new Error("oh no");
    };
    setTimeout(doSomething);
  `}
  language="js"
  output={`
    Error: oh no
        doSomething stackTraceExample.js:2
  `}
  outputType="error"
/>

Notice how the function name `doSomething` appears in the error output. The anonymous version isn't so clear. You might see something like this instead (depending on your development environment):

<CodeBlock
  code={`
    setTimeout(() => {
      throw new Error("oh no");
    });
  `}
  language="js"
  output={`
    Error: oh no
        evaluate stackTraceExample.js:2
  `}
  outputType="error"
/>

If you write a lot of your code in `index.js` files, things can get even more cryptic.

<CodeBlock
  output={`
    Error: oh no
        evaluate index.js:2
  `}
  outputType="error"
/>

## Anonymous React components

I've seen this style of writing React components cropping up lately, where the function is written as an anonymous default export.

```jsx
import React from "react";
export default () => <p>Hello world</p>;
```

Components like this are pretty awkward to find in the React Dev Tools.

[screenshot of anonymous component tree]
