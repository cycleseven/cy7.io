---
title: "Overusing anonymous functions"
slug: "anonymous-functions"
date: "2020-01-01"
---
import { CodeBlock } from "@cy7/blog";

Anonymous functions are a super-common feature of JS that can make callback-heavy code more concise.

```js
// With named functions
array
  .filter(function notNull(x) {
    return x !== null;
  })
  .map(function double(x) {
    return x * 2;
  });

// The same code with anonymous functions
array
  .filter(x => x !== null)
  .map(x => x * 2);
```

The ES6 arrow syntax is commonly used for anonymous functions, although arrow functions don't need to be anonymous.

```js
// A named arrow function
let double = x => x * 2;
console.log(double.name); // "double"
```

Anonymous functions have a downside: they make stack traces less readable. Look at the stack trace for this named callback:

<CodeBlock
  code={`
    const doSomething = () => {
      throw new Error("oh no");
    };
    setTimeout(doSomething);
  `}
  language="js"
  output={`
    Error: oh no
        doSomething stackTraceExample.js:2
  `}
  outputType="error"
/>

Notice how `doSomething` appears in the error output.

```js
setTimeout(() => {
  throw new Error("oh no");
});
```

```
Error: oh no
    evaluate stackTraceExample.js:2
```

If you write a lot of your code in `index.js` files, things can get even more cryptic.

```
Error: oh no
    evaluate index.js:2
```

## Anonymous React components

I've seen this style of writing React components cropping up lately. It's even in the Gatsby docs. [citation needed]

```jsx
import React from "react";
export default () => <p>Hello world</p>;
```

This suffers from a similar problem: you'll have a difficult time finding this in React Dev Tools.

[screenshot of anonymous component tree]
